<!DOCTYPE html><html lang="en"><head><title>src/whereIt</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="src/whereIt"><meta name="groc-project-path" content="src/whereIt.js"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path">src/whereIt.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><p>EnoFJS
Version: 4.0.0
Copyright (c) 2014.
Author Andy Tang
Fork me on Github: <a href="https://github.com/EnoF/EnoFJS">https://github.com/EnoF/EnoFJS</a></p></div></div><div class="code"><div class="wrapper">(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">whereIt</span><span class="hljs-params">(it, LinkedHashMap)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Create new test cases, ready to be executed by Jasmine</p></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><pre><code> whereIt(&#39;should add&#39;, function addNumbers(x, y, result){
     expect(calulator.add(x, y)).toEqual(result);
 }, [
     {
           x: 1,
           y: 2,
           result: 3
     },
     {
         y: 200,
         x: 2,
         result: 202
     }
 ]);</code></pre></div></div><div class="code"><div class="wrapper">  window.whereIt = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">whereIt</span><span class="hljs-params">(description, test, whereCases)</span> {</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; whereCases.length; i++) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Before registering the tests, we match the Given arguments
to the test cases.</p></div></div><div class="code"><div class="wrapper">      registerTest(description, test, matchGiven(test, whereCases[i]));
    }
  };</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Register the test with the arguments as if the tests were
registered normally through Jasmine.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">registerTest</span><span class="hljs-params">(description, test, matchedArguments)</span> {</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>First we extract the arguments so we can pass it to the test.</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-keyword">var</span> args = extractArguments(matchedArguments);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Create a customized test description to easily recognize which test fails.</p></div></div><div class="code"><div class="wrapper">    it(createTestDescription(description, args), <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">executeTest</span><span class="hljs-params">()</span> {</span>
      test.apply(<span class="hljs-keyword">this</span>, args);
    });
  }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Lets make our tests identifiable by the parameters provided to the test case.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createTestDescription</span><span class="hljs-params">(description, args)</span> {</span>
    <span class="hljs-keyword">return</span> description + <span class="hljs-string">' ['</span> + args + <span class="hljs-string">']'</span>;
  }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Matches the given with the arguments, this way, you
can rearrange the arguments as you wish.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">matchGiven</span><span class="hljs-params">(test, testArguments)</span> {</span>
    <span class="hljs-keyword">var</span> testAsString = test.toString();
    <span class="hljs-keyword">var</span> list = <span class="hljs-keyword">new</span> LinkedHashMap();
    <span class="hljs-keyword">var</span> index;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> testArguments) {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>istanbul ignore else: sanity check </p></div></div><div class="code"><div class="wrapper">      <span class="hljs-keyword">if</span> (testArguments.hasOwnProperty(i)) {
        index = testAsString.indexOf(i + <span class="hljs-string">','</span>);
        <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span>) {
          index = testAsString.indexOf(i + <span class="hljs-string">')'</span>);
        }
        placeAtRightPositionInList(index, testArguments[i], list);
      }
    }
    <span class="hljs-keyword">return</span> list;
  }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Adds the value at the correct place inside the list.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">placeAtRightPositionInList</span><span class="hljs-params">(index, testArgument, list)</span> {</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> node = list.getFirst(); node; node = node.getNext()) {
      <span class="hljs-keyword">if</span> (index &lt; node.getKey()) {
        <span class="hljs-keyword">return</span> list.addBefore(node.getKey(), index, testArgument);
      }
    }
    <span class="hljs-keyword">return</span> list.add(index, testArgument);
  }</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Converts the list of arguments to an array.</p></div></div><div class="code"><div class="wrapper">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extractArguments</span><span class="hljs-params">(matchedArguments)</span> {</span>
    <span class="hljs-keyword">var</span> args = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> node = matchedArguments.getFirst(); node; node = node.getNext()) {
      args.push(node.getValue());
    }
    <span class="hljs-keyword">return</span> args;
  }


}(window.it, window.enofjs.LinkedHashMap));</div></div></div></div></body></html>